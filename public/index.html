<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZanyTown - Welcome!</title>
    <link rel="stylesheet" href="style.css">
    <!-- Google Fonts Import handled in style.css -->
</head>

<body>
    <!-- App Wrapper for overall layout -->
    <div id="app-wrapper">

        <!-- Loading Overlay (Visible by default via CSS) -->
        <div id="loading-overlay">
            <div id="loading-message">Initializing ZanyTown...</div>
            <!-- Optional: <div class="spinner"></div> -->
        </div>
        <!-- End Loading Overlay -->

        <!-- Header Bar -->
        <header id="main-header">
            <h1>ðŸ¤ª ZanyTown! ðŸ¤ª</h1>
            <div id="room-name-display" class="header-info">Room: Loading...</div>
            <div id="player-currency" class="header-info">Silly Coins: ...</div>
            <button id="logout-btn" title="Log out and return to login screen">Bye Bye!</button>
        </header>

        <!-- Main Content Area (Flex Row) -->
        <main id="main-content">

            <!-- Left Sidebar -->
            <aside id="left-sidebar" class="sidebar">
                <div id="room-controls" class="ui-panel panel-column">
                    <h4>Shenanigans</h4>
                    <button id="zoom-in-btn" title="Zoom In (Scroll Up)">Get Closer!</button>
                    <button id="zoom-out-btn" title="Zoom Out (Scroll Down)">Back Off!</button>
                    <button id="toggle-edit-btn" title="Toggle Build/Edit Mode (E)">Make Stuff? (Off)</button>
                    <button id="open-shop-btn" title="Open Shop Catalog">Gizmo Shop</button>
                </div>
                 <div id="user-list-panel" class="ui-panel panel-column">
                     <h4>Who's Here?</h4>
                     <ul id="user-list-content">
                         <li><i>Joining room...</i></li>
                     </ul>
                 </div>

                 <!-- START: Admin Controls Panel (Hidden by default) -->
                 <div id="admin-controls" class="ui-panel panel-column" style="display: none;">
                    <h4>Admin Powers</h4>
                    <button id="create-room-btn" title="Create a new empty room">Create Room</button>

                    <div id="admin-room-section" class="admin-section">
                        <h5>Available Rooms</h5>
                        <div id="admin-room-list" class="admin-list-box">
                            <i>Loading rooms...</i>
                        </div>
                    </div>

                    <div id="admin-layout-edit-section" class="admin-section">
                        <h5>Layout Paint Type</h5>
                        <div id="admin-layout-tile-type" class="admin-radio-group">
                            <label><input type="radio" name="layout-paint-type" value="0" checked> Floor</label>
                            <label><input type="radio" name="layout-paint-type" value="1"> Wall</label>
                            <label><input type="radio" name="layout-paint-type" value="2"> AltFloor</label>
                            <label><input type="radio" name="layout-paint-type" value="X"> Hole</label>
                        </div>
                         <p class="admin-instruction">(In Edit Mode, click tiles on map to paint)</p>
                    </div>
                 </div>
                 <!-- END: Admin Controls Panel -->

                 <div id="coords-debug" class="ui-panel panel-column">
                     <h4>Nerd Stuff</h4>
                     <div id="debug-content">Initializing...</div>
                </div>
            </aside>

            <!-- Game Canvas Area (Center) -->
            <div id="game-world">
                <div id="game-container">
                    <canvas id="gameCanvas">
                        Uh oh! Your browser doesn't support the magic canvas!
                    </canvas>
                    <!-- Chat Bubbles Container -->
                    <div id="chat-bubbles-container"></div>

                    <!-- Floating Panels positioned OVER the canvas -->
                    <div id="profile-panel" class="ui-panel floating-panel" style="display: none;">
                         <button id="profile-close-btn" class="close-btn" title="Close Profile">X</button>
                         <h4>Who Dat?</h4>
                         <div id="profile-content"></div>
                     </div>
                     <div id="recolor-panel" class="ui-panel floating-panel" style="display: none;">
                         <button id="recolor-close-btn" class="close-btn" title="Close Recolor">X</button>
                         <h4>Splash Some Color!</h4>
                         <p id="recolor-item-name">Item: ???</p>
                         <div id="recolor-swatches"> <!-- Container for color swatches -->
                             <p><i>Fetching colors...</i></p>
                         </div>
                         <button id="recolor-reset-btn" title="Reset to boring default color">Go Back!</button>
                     </div>
                     <div id="shop-panel" class="ui-panel floating-panel" style="display: none;">
                         <button id="shop-close-btn" class="close-btn" title="Close Shop">X</button>
                         <h4>Gizmo-Mart</h4>
                         <div id="shop-items">
                             <p><i>Stocking shelves...</i></p>
                         </div>
                     </div>

                </div>
                <!-- Chat Area (Below Canvas) -->
                <div id="chat-area" class="ui-panel">
                    <div id="chat-log"></div>
                    <input type="text" id="chat-input" placeholder="Say something zany! Or type /help" autocomplete="off">
                </div>
            </div>


            <!-- Right Sidebar -->
            <aside id="right-sidebar" class="sidebar">
                 <div id="inventory-panel" class="ui-panel panel-column">
                    <h4>Your Junk</h4>
                    <div id="inventory-items">
                        <p><i>Connecting...</i></p>
                    </div>
                    <div class="inventory-actions">
                        <!-- Pickup Button -->
                        <button id="pickup-furni-btn" disabled title="Yoink! Pick up selected furniture (Delete/Backspace)">Yoink!</button>
                        <!-- Recolor Button (initially hidden, enabled based on selection) -->
                        <button id="recolor-furni-btn" disabled style="display: none;" title="Recolor selected furniture">Paint It!</button>
                    </div>
                </div>
                <!-- Could add more panels here later, e.g., quests, settings -->
            </aside>

        </main>

    </div> <!-- End #app-wrapper -->

    <!-- Load Socket.IO client library -->
    <script src="/socket.io/socket.io.js"></script>
    <!-- Load Client Game Logic (using ES Modules) -->
    <script type="module" src="js/main.js"></script>
</body>

</html>